os: osx
osx_image: xcode11.3
language: node_js
node_js: '12'
addons:
  homebrew:
    packages:
      - rpm
# credit: https://github.com/develar/onshape-desktop-shell/blob/master/.travis.yml
branches:
  except:
    - "/^v\\d+\\.\\d+\\.\\d+/"
cache:
  directories:
    - node_modules
    - $HOME/.cache/electron
    - $HOME/.cache/electron-builder
install:
  - npm i
script:
  - npm test
  - travis_wait npm run dist:all
